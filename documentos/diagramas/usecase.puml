@startuml UseCase_YouTubeDownloader
!theme amiga

title Sistema de Download do YouTube - Casos de Uso

left to right direction

actor "Usuário" as User
actor "YouTube API" as YT
actor "Back-end" as API

rectangle "Gerenciador de Downloads YouTube" {
  usecase "Pesquisar Vídeos" as UC1
  usecase "Inserir URLs Diretas" as UC2
  usecase "Escolher Tipo de Mídia" as UC3
  usecase "Selecionar Item Individual" as UC4
  usecase "Adicionar à Lista" as UC5
  usecase "Download Imediato" as UC6
  usecase "Acompanhar Progresso" as UC7
  usecase "Download em Lote" as UC8
  usecase "Criar ZIP" as UC9
  usecase "Conversão para MP3" as UC10
  usecase "Limpeza Automática" as UC11
}

' Relacionamentos Usuário - Entrada
User --> UC1 : pesquisa termo
User --> UC2 : cola URLs
User --> UC3 : áudio ou vídeo

' Relacionamentos Usuário - Seleção
User --> UC4 : clica item
User --> UC5 : adiciona lista
User --> UC8 : confirma lote

' Relacionamentos Sistema - API
UC1 --> YT : consulta API
UC2 --> API : valida URLs

' Relacionamentos Sistema - Fluxo Principal
UC4 --> UC6 : <<extend>>\nitem único
UC4 --> UC5 : <<extend>>\nmúltiplos itens
UC5 --> UC8 : <<extend>>\nlista preenchida

' Relacionamentos Sistema - Download
UC6 --> UC7 : <<include>>\nnotifica progresso
UC8 --> UC9 : <<include>>\nempacota arquivos
UC8 --> UC7 : <<include>>\nnotifica progresso

' Relacionamentos Sistema - Processamento (só para áudio)
UC6 --> UC10 : <<extend>>\nse tipo = áudio
UC8 --> UC10 : <<extend>>\nse tipo = áudio
UC6 --> UC11 : agenda limpeza
UC9 --> UC11 : agenda limpeza

note right of UC3
  Primeira escolha do usuário:
  - Áudio (MP3)
  - Vídeo (MP4)
end note

note right of UC4
  Comportamento dinâmico:
  - 1 item: download imediato
  - Múltiplos: adiciona à lista
end note

note right of UC8
  Acionado quando:
  - Lista tem 2+ itens
  - Usuário confirma download
  - Gera ZIP automaticamente
end note

note right of UC7
  WebSocket em tempo real:
  - started, progress, complete
  - Individual ou lote
end note

note right of UC10
  Conversão apenas para áudio:
  - Extrai áudio do vídeo
  - Converte para MP3
  - Remove arquivo original
end note

note right of UC11
  Limpeza automática em 30s
  Remove arquivos temporários
end note

@enduml